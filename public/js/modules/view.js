define(["jquery","highcharts","bootstrap"],function(a){return{vue:null,buildChartByCategory:function(a,b,c){Highcharts.chart("chart-by-category",{chart:{type:"bar"},title:{text:"Gastos por categoria"},subtitle:{text:'Fonte: <a href="http://camara.gov.br">Câmara dos Deputados</a>'},xAxis:{categories:a,title:{text:null}},yAxis:{min:0,title:{text:"Reais (R$)",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" millions"},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{name:c,data:b}]})},alert:{buildLoading:function(b,c){""!=c&&void 0!=c||(c="Carregando dados..."),a(b).html('<p class="alert alert-info text-center"><i class="fa fa-2x fa-pulse fa-spin fa-spinner"></i><br>'+c+"</p>")},buildAlertDanger:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-danger text-center"><i class="fa fa-2x fa-times-circle"></i><br>'+c+"</p>")},buildAlertWarning:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-warning text-center"><i class="fa fa-2x fa-warning"></i><br>'+c+"</p>")}},accessibility:{changeStatusWAIARIA:function(){var b=a(window).width();b<768?a("#menu-accessibility").attr("aria-hidden",!0):b>=768&&b<992?a("#menu-accessibility").attr("aria-hidden",!1):b>=992&&b<1200?a("#menu-accessibility").attr("aria-hidden",!1):b>=1200&&a("#menu-accessibility").attr("aria-hidden",!1)},checkFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b?a("html").css({"font-size":b+"px"}):localStorage.setItem("fontSize",JSON.stringify(16))},upFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b<20&&(b++,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},lowFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b>16&&(b--,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},checkContrast:function(){JSON.parse(localStorage.getItem("contrast"))?this.enableContrast():this.disableContrast()},enableContrast:function(){localStorage.setItem("contrast",JSON.stringify(!0)),a("#btn-contrast").html("Baixo Contraste"),a(".header-main").css({background:"#000"}),a(".btn-success").css({"background-color":"#000"}),a(".btn-primary").css({"background-color":"#000"}),a(".text-info-list-congressmen").css({color:"#000"}),a(".value-total").css({color:"#000"})},disableContrast:function(){localStorage.setItem("contrast",JSON.stringify(!1)),a("#btn-contrast").html("Alto Contraste"),a(".header-main").removeAttr("style"),a(".btn-success").removeAttr("style"),a(".btn-primary").removeAttr("style"),a(".text-info-list-congressmen").removeAttr("style"),a(".value-total").removeAttr("style")}},buildHome:function(){var b=require("request"),c=require("vue");this.vue=new c({el:"#data-congressmen",data:{search:"",page:1,token:this.token,loading:!0,itemsActive:!0,scrollPos:0,finishList:!1,limitByPage:50,congressmen:[],congressmenFiltered:[],total:0},created:function(){var a=this;b.loadAllCongressmen(function(b){a.congressmen=a.congressmenFiltered=b,a.total=0;for(var c=0;c<a.congressmen.length;c++)a.total+=parseFloat(a.congressmen[c].despesas.total);a.loading=!1},function(){a.loading=!0})},watch:{search:function(a){this.filter()}},methods:{openCongressman:function(a){localStorage.setItem("congressman",JSON.stringify(a))},searchItem:function(a){var b=this.search.trim().toLowerCase();if(-1!==a.nomeCivil.toLowerCase().indexOf(b)||-1!==a.ultimoStatus.nomeEleitoral.toString().toLowerCase().indexOf(b))return!0},filter:function(){if(this.search=a("#text-search").val(),0!=this.congressmen.length){if(this.loading=!0,this.congressmenFiltered=this.congressmen.filter(this.searchItem),0==this.congressmenFiltered.length)return void(this.loading=!1);this.loading=!1}}}})},buildCongressman:function(b){var c=require("request"),d=require("vue");this.vue=new d({el:"#page-congressman",data:{loading:!1,total:0,yearOutgoing:2017,monthOutgoing:9,congressman:{id:b,nomeCivil:"",nomeEleitoral:"",siglaPartido:"",siglaUf:"",idLegislatura:"",urlFoto:"",telefone:"",email:"",dataNascimento:"",idade:"",condicaoEleitoral:"",escolaridade:"",municipioNascimento:"",ufNascimento:"",despesas:{2015:{posicao:0,total:0},2016:{posicao:0,total:0},2017:{posicao:0,total:0},posicaoMandato55:0,total:0}},outgoing:[]},beforeCreate:function(){var a=this;c.loadCongressmanDetails(b,function(b){var c=new Date(b.dataNascimento),d=new Date,e=Math.floor((d.getTime()-c.getTime())/1e3/60/60/24/365);a.congressman.id=b.id,a.congressman.nomeCivil=b.nomeCivil,a.congressman.nomeEleitoral=b.ultimoStatus.nomeEleitoral,a.congressman.siglaPartido=b.ultimoStatus.siglaPartido,a.congressman.siglaUf=b.ultimoStatus.siglaUf,a.congressman.idLegislatura=b.ultimoStatus.idLegislatura,a.congressman.urlFoto=b.ultimoStatus.urlFoto,a.congressman.telefone=b.ultimoStatus.gabinete.telefone,a.congressman.email=b.ultimoStatus.gabinete.email,a.congressman.condicaoEleitoral=b.ultimoStatus.condicaoEleitoral,a.congressman.dataNascimento=b.dataNascimento.split("-").reverse().join("/"),a.congressman.idade=e,a.congressman.escolaridade=b.escolaridade,a.congressman.municipioNascimento=b.municipioNascimento,a.congressman.ufNascimento=b.ufNascimento,a.congressman.despesas=b.despesas,document.title=b.ultimoStatus.nomeEleitoral+" | Vigie Seu Deputado",a.buildSelectDate();var f=new Date;a.yearOutgoing=f.getFullYear(),a.monthOutgoing=f.getMonth()+1,a.loadOutgoing()},function(){a.loading=!0},function(a){console.log(a)})},mounted:function(){var b=require("actions"),c=require("view");a("#btn-speech-recognition").click(b.changeStatusSpeechRecognition),a("#btn-contrast").click(b.changeStatusContrast),a("#btn-up-font").click(c.accessibility.upFontSize),a("#btn-low-font").click(c.accessibility.lowFontSize)},methods:{loadOutgoing:function(){var a=this;c.loadCongressmanOutgoing(b,{mes:a.monthOutgoing,ano:a.yearOutgoing},function(b){if(a.total=0,a.outgoing=[],0==b.length)return void(a.loading=!1);for(var c={tipoDespesa:b[0].tipoDespesa,expenses:[]},d=0,e=[b[0].tipoDespesa],f=[0],g=0,h=b.length;g<h;g++)a.total+=parseFloat(b[g].valorDocumento)-parseFloat(b[g].valorGlosa),b[g].tipoDespesa==c.tipoDespesa?c.expenses.push(b[g]):(a.outgoing.push(c),c={tipoDespesa:b[g].tipoDespesa,expenses:[b[g]]},d++,e.push(b[g].tipoDespesa),f.push(0)),f[d]+=parseFloat(b[g].valorDocumento)-parseFloat(b[g].valorGlosa);a.outgoing.push(c),a.loading=!1,setTimeout(function(){a.buildChartByCategory(e,f)},1e3)},function(){a.loading=!0},function(a){console.log(a)})},buildChartByCategory:function(b,c){Highcharts.chart("chart-by-category",{chart:{type:"bar"},title:{text:"Gastos por categoria"},subtitle:{text:'Fonte: <a href="http://camara.gov.br">Câmara dos Deputados</a>'},xAxis:{categories:b,title:{text:null}},yAxis:{min:0,title:{text:"Reais (R$)",align:"high"},labels:{overflow:"justify"}},tooltip:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!0,formatter:function(){return parseFloat(this.y.toFixed(2)).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:0,y:40,floating:!0,borderWidth:1,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{name:a("#select-month option:selected").html(),data:c}]})},selectMonth:function(){var b=a("#select-month option:selected").val().split("/");this.monthOutgoing=b[0],this.yearOutgoing=b[1],this.loadOutgoing()},buildSelectDate:function(){for(var b=new Date,c=1,d=[],e=2015,f="";c<=12;){if(d.push(c+"/"+e),v=this.formatMonth(c-1)+"/"+e,b.getMonth()==c-1&&b.getFullYear()==e){f+='<option selected value="'+c+"/"+e+'">'+v+"</option>";break}f+='<option value="'+c+"/"+e+'">'+v+"</option>",12==c&&(e++,c=0),c++}a("#select-month").html(f)},formatMoney:function(a){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},formatMonth:function(b){if(void 0===b){b=a("#select-month option:selected").val().split("/")[0]-1}switch(b){case 0:return"Janeiro";case 1:return"Fevereiro";case 2:return"Março";case 3:return"Abril";case 4:return"Maio";case 5:return"Junho";case 6:return"Julho";case 7:return"Agosto";case 8:return"Setembro";case 9:return"Outubro";case 10:return"Novembro";default:return"Dezembro"}}}})}}});