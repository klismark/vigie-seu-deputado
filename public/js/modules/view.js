define(["jquery","chartjs","bootstrap"],function(a){var b={buildCharts:function(){a("#tabs-congressman a").click(function(b){b.preventDefault(),a(this).tab("show")});var b=["Março/2017","Abril/2017","Maio/2017","Junho/2017","Julho/2017","Agosto/2017"],c=[900,2e4,3e3,5e3,25476,35432.9];this.buildChartMain(b,c);var b=["Material de esctiório","Serviços Postais","Telefonia","Combustíveis","Passagens Aéreas","Divulgação"],c=[900,2e4,3e3,5e3,25476,35432.9];this.buildChartByCategory(b,c)},buildChartMain:function(a,b){var c=document.getElementById("chart-main");new Chart(c,{type:"line",data:{labels:a,datasets:[{label:"Gastos da cota parlamentar nos últimos 6 meses",data:b,backgroundColor:["rgba(75, 192, 192, 0.3)"],borderColor:["rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a,b,c){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}]},tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+" : "+parseFloat(b.datasets[a.datasetIndex].data[a.index]).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}}})},buildChartByCategory:function(a,b){Chart.pluginService.register({beforeRender:function(a){a.config.options.showAllTooltips&&(a.pluginTooltips=[],a.config.data.datasets.forEach(function(b,c){a.getDatasetMeta(c).data.forEach(function(b,c){a.pluginTooltips.push(new Chart.Tooltip({_chart:a.chart,_chartInstance:a,_data:a.data,_options:a.options,_active:[b]},a))})}),a.options.tooltips.enabled=!1)},afterDraw:function(a,b){if(a.config.options.showAllTooltips){if(!a.allTooltipsOnce){if(1!==b)return;a.allTooltipsOnce=!0}a.options.tooltips.enabled=!0,Chart.helpers.each(a.pluginTooltips,function(a){a.initialize(),a.update(),a.pivot(),a.transition(b).draw()}),a.options.tooltips.enabled=!1}}});var c=document.getElementById("chart-by-category");new Chart(c,{type:"horizontalBar",data:{labels:a,datasets:[{label:"Gastos por categoria",data:b,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{showAllTooltips:!0,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a,b,c){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}]},tooltips:{callbacks:{mode:"y",title:function(){return""},label:function(a,b){return b.labels[a.index]+" : "+parseFloat(b.datasets[a.datasetIndex].data[a.index]).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}}})},alert:{buildLoading:function(b,c){""!=c&&void 0!=c||(c="Carregando dados..."),a(b).html('<p class="alert alert-info text-center"><i class="fa fa-2x fa-pulse fa-spin fa-spinner"></i><br>'+c+"</p>")},buildAlertDanger:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-danger text-center"><i class="fa fa-2x fa-times-circle"></i><br>'+c+"</p>")},buildAlertWarning:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-warning text-center"><i class="fa fa-2x fa-warning"></i><br>'+c+"</p>")}},accessibility:{changeStatusWAIARIA:function(){var b=a(window).width();b<768?a("#menu-accessibility").attr("aria-hidden",!0):b>=768&&b<992?a("#menu-accessibility").attr("aria-hidden",!1):b>=992&&b<1200?a("#menu-accessibility").attr("aria-hidden",!1):b>=1200&&a("#menu-accessibility").attr("aria-hidden",!1)},checkFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b?a("html").css({"font-size":b+"px"}):localStorage.setItem("fontSize",JSON.stringify(16))},upFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b<20&&(b++,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},lowFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b>16&&(b--,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},checkContrast:function(){JSON.parse(localStorage.getItem("contrast"))?this.enableContrast():this.disableContrast()},enableContrast:function(){JSON.parse(localStorage.getItem("contrast"))||(localStorage.setItem("contrast",JSON.stringify(!0)),a("#btn-contrast").html("Baixo Contraste"),a(".header-main").css({background:"#000"}))},disableContrast:function(){JSON.parse(localStorage.getItem("contrast"))&&(localStorage.setItem("contrast",JSON.stringify(!1)),a("#btn-contrast").html("Alto Contraste"),a(".header-main").removeAttr("style"))}},buildHome:function(){var a=require("request"),c=require("vue");new c({el:"#busca",data:{search:"",page:1,loading:!0,scrollPos:0,finishList:!1,limitByPage:100,congressmen:[],congressmenFiltered:[],last:1,filtered:!1},created:function(){this.loadCongressmen()},destroyed:function(){window.removeEventListener("scroll",this.loadMore)},methods:{loadMore:function(){if(!this.finishList&&!this.loading){""==this.search&&(this.filtered=!1);var c=this;this.scrollPos=document.querySelector("html").scrollHeight-window.innerHeight-document.querySelector("html").scrollTop,0==this.scrollPos&&(c.page++,a.loadCongressmen({pagina:c.page,itens:c.limitByPage,ordenarPor:"nome"},function(a){if(c.congressmen=c.congressmen.concat(a.dados),c.filtered){var b=c.search;c.congressmenFiltered=c.congressmen.filter(function(a){return!!a.nome.toLocaleLowerCase().includes(b)||(a.siglaUf.toLocaleLowerCase()==b||a.siglaPartido.toLocaleLowerCase()==b)}),console.log(c.congressmenFiltered.length),console.log(c.finishList),0!=c.congressmenFiltered.length||c.finishList||(c.loading=!1,c.loadMore())}else this.congressmenFiltered=this.congressmen;c.page==c.last&&(c.finishList=!0),setTimeout(function(){c.loading=!1},2e3)},function(){c.loading=!0},function(){b.alert.buildAlertDanger("#alert-box-loading","Não foi possível carregar a lista completa de deputados, tente novamente.")}))}},loadCongressmen:function(){var c=this;a.loadCongressmen({pagina:c.page,itens:c.limitByPage,ordenarPor:"nome"},function(a){var b=a.links[3].href,d=b.substring(b.indexOf("?pagina=")+8,b.indexOf("&itens"));c.last=d,c.congressmenFiltered=c.congressmen=a.dados,c.loading=!1,window.addEventListener("scroll",c.loadMore)},function(){c.loading=!0},function(){b.alert.buildAlertDanger("#alert-box-loading","Não foi possível carregar a lista de deputados, tente novamente.")})},searchCongressman:function(){this.filtered=!0;var a=this.search;if(""==a)return this.congressmenFiltered=this.congressmen,void(this.filtered=!1);this.congressmenFiltered=this.congressmen.filter(function(b){return!!b.nome.toLocaleLowerCase().includes(a)||(b.siglaUf.toLocaleLowerCase()==a||b.siglaPartido.toLocaleLowerCase()==a)})}}})},buildCongressman:function(a){var b=require("request"),c=require("vue");new c({el:"#page-congressman",data:{loading:!1,yearOutgoing:2017,monthOutgoing:9,congressman:{id:a,nomeCivil:"",nomeEleitoral:"",siglaPartido:"",siglaUf:"",idLegislatura:"",urlFoto:"",telefone:"",email:"",dataNascimento:"",idade:"",condicaoEleitoral:"",escolaridade:"",municipioNascimento:"",ufNascimento:""},outgoings:[]},beforeCreate:function(){var c=this;b.loadCongressmanDetails(a,function(a){var b=new Date(a.dataNascimento),d=new Date,e=Math.floor((d.getTime()-b.getTime())/1e3/60/60/24/365);c.congressman.id=a.id,c.congressman.nomeCivil=a.nomeCivil,c.congressman.nomeEleitoral=a.ultimoStatus.nomeEleitoral,c.congressman.siglaPartido=a.ultimoStatus.siglaPartido,c.congressman.siglaUf=a.ultimoStatus.siglaUf,c.congressman.idLegislatura=a.ultimoStatus.idLegislatura,c.congressman.urlFoto=a.ultimoStatus.urlFoto,c.congressman.telefone=a.ultimoStatus.gabinete.telefone,c.congressman.email=a.ultimoStatus.gabinete.email,c.congressman.condicaoEleitoral=a.ultimoStatus.condicaoEleitoral,c.congressman.dataNascimento=a.dataNascimento.split("-").reverse().join("/"),c.congressman.idade=e,c.congressman.escolaridade=a.escolaridade,c.congressman.municipioNascimento=a.municipioNascimento,c.congressman.ufNascimento=a.ufNascimento,document.title=a.ultimoStatus.nomeEleitoral+" | Vigie Seu Deputado",c.loadOutgoing()},function(){c.loading=!0},function(a){console.log(a)})},methods:{loadOutgoing:function(){var c=this;b.loadCongressmanOutgoing(a,{mes:c.monthOutgoing,ano:c.yearOutgoing,itens:100},function(a){c.outgoing=a,console.log(a)},function(){c.loading=!0},function(a){console.log(a)})}}})}};return b});