define(["jquery","chartjs","bootstrap"],function(a){var b={buildCharts:function(){a("#tabs-congressman a").click(function(b){b.preventDefault(),a(this).tab("show")});var b=["Março/2017","Abril/2017","Maio/2017","Junho/2017","Julho/2017","Agosto/2017"],c=[900,2e4,3e3,5e3,25476,35432.9];this.buildChartMain(b,c);var b=["Material de esctiório","Serviços Postais","Telefonia","Combustíveis","Passagens Aéreas","Divulgação"],c=[900,2e4,3e3,5e3,25476,35432.9];this.buildChartByCategory(b,c)},buildChartMain:function(a,b){var c=document.getElementById("chart-main");new Chart(c,{type:"line",data:{labels:a,datasets:[{label:"Gastos da cota parlamentar nos últimos 6 meses",data:b,backgroundColor:["rgba(75, 192, 192, 0.3)"],borderColor:["rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a,b,c){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}]},tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+" : "+parseFloat(b.datasets[a.datasetIndex].data[a.index]).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}}})},buildChartByCategory:function(a,b){Chart.pluginService.register({beforeRender:function(a){a.config.options.showAllTooltips&&(a.pluginTooltips=[],a.config.data.datasets.forEach(function(b,c){a.getDatasetMeta(c).data.forEach(function(b,c){a.pluginTooltips.push(new Chart.Tooltip({_chart:a.chart,_chartInstance:a,_data:a.data,_options:a.options,_active:[b]},a))})}),a.options.tooltips.enabled=!1)},afterDraw:function(a,b){if(a.config.options.showAllTooltips){if(!a.allTooltipsOnce){if(1!==b)return;a.allTooltipsOnce=!0}a.options.tooltips.enabled=!0,Chart.helpers.each(a.pluginTooltips,function(a){a.initialize(),a.update(),a.pivot(),a.transition(b).draw()}),a.options.tooltips.enabled=!1}}});var c=document.getElementById("chart-by-category");new Chart(c,{type:"horizontalBar",data:{labels:a,datasets:[{label:"Gastos por categoria",data:b,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{showAllTooltips:!0,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a,b,c){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}]},tooltips:{callbacks:{mode:"y",title:function(){return""},label:function(a,b){return b.labels[a.index]+" : "+parseFloat(b.datasets[a.datasetIndex].data[a.index]).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}}}})},alert:{buildLoading:function(b,c){""!=c&&void 0!=c||(c="Carregando dados..."),a(b).html('<p class="alert alert-info text-center"><i class="fa fa-2x fa-pulse fa-spin fa-spinner"></i><br>'+c+"</p>")},buildAlertDanger:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-danger text-center"><i class="fa fa-2x fa-times-circle"></i><br>'+c+"</p>")},buildAlertWarning:function(b,c){""!=c&&void 0!=c||(c="Houve um erro inesperado, tente recarregar a página novamente."),a(b).html('<p class="alert alert-warning text-center"><i class="fa fa-2x fa-warning"></i><br>'+c+"</p>")}},accessibility:{changeStatusWAIARIA:function(){var b=a(window).width();b<768?a("#menu-accessibility").attr("aria-hidden",!0):b>=768&&b<992?a("#menu-accessibility").attr("aria-hidden",!1):b>=992&&b<1200?a("#menu-accessibility").attr("aria-hidden",!1):b>=1200&&a("#menu-accessibility").attr("aria-hidden",!1)},checkFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b?a("html").css({"font-size":b+"px"}):localStorage.setItem("fontSize",JSON.stringify(16))},upFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b<20&&(b++,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},lowFontSize:function(){var b=JSON.parse(localStorage.getItem("fontSize"));b>16&&(b--,localStorage.setItem("fontSize",JSON.stringify(b)),a("html").css({"font-size":b+"px"}))},checkContrast:function(){JSON.parse(localStorage.getItem("contrast"))?this.enableContrast():this.disableContrast()},enableContrast:function(){JSON.parse(localStorage.getItem("contrast"))||(localStorage.setItem("contrast",JSON.stringify(!0)),a("#btn-contrast").html("Baixo Contraste"),a(".header-main").css({background:"#000"}))},disableContrast:function(){JSON.parse(localStorage.getItem("contrast"))&&(localStorage.setItem("contrast",JSON.stringify(!1)),a("#btn-contrast").html("Alto Contraste"),a(".header-main").removeAttr("style"))}},buildHome:function(){var a=require("request"),c=require("vue");new c({el:"#busca",data:{search:"",page:1,loading:!0,scrollPos:0,finishList:!1,limitByPage:100,congressmen:[],congressmenFiltered:[],last:1,filtered:!1},created:function(){this.loadCongressmen()},destroyed:function(){window.removeEventListener("scroll",this.loadMore)},methods:{loadMore:function(){if(!this.finishList&&!this.loading){""==this.search&&(this.filtered=!1);var c=this;this.scrollPos=document.querySelector("html").scrollHeight-window.innerHeight-document.querySelector("html").scrollTop,0==this.scrollPos&&(c.page++,a.loadCongressmen({pagina:c.page,itens:c.limitByPage,ordenarPor:"nome"},function(a){if(c.congressmen=c.congressmen.concat(a.dados),c.filtered){var b=c.search;c.congressmenFiltered=c.congressmen.filter(function(a){return!!a.nome.toLocaleLowerCase().includes(b)||(a.siglaUf.toLocaleLowerCase()==b||a.siglaPartido.toLocaleLowerCase()==b)}),0!=c.congressmenFiltered.length||c.finishList||(c.loading=!1,c.loadMore())}else this.congressmenFiltered=this.congressmen;c.page==c.last&&(c.finishList=!0),setTimeout(function(){c.loading=!1},2e3)},function(){c.loading=!0},function(){b.alert.buildAlertDanger("#alert-box-loading","Não foi possível carregar a lista completa de deputados, tente novamente.")}))}},loadCongressmen:function(){var c=this;a.loadCongressmen({pagina:c.page,itens:c.limitByPage,ordenarPor:"nome"},function(a){var b=a.links[3].href,d=b.substring(b.indexOf("?pagina=")+8,b.indexOf("&itens"));c.last=d,c.congressmenFiltered=c.congressmen=a.dados,c.loading=!1,window.addEventListener("scroll",c.loadMore)},function(){c.loading=!0},function(){b.alert.buildAlertDanger("#alert-box-loading","Não foi possível carregar a lista de deputados, tente novamente.")})},searchCongressman:function(){this.filtered=!0;var a=this.search;if(""==a)return this.congressmenFiltered=this.congressmen,void(this.filtered=!1);this.congressmenFiltered=this.congressmen.filter(function(b){return!!b.nome.toLocaleLowerCase().includes(a)||(b.siglaUf.toLocaleLowerCase()==a||b.siglaPartido.toLocaleLowerCase()==a)}),0==this.congressmenFiltered.length&&window.scrollTo(0,document.body.scrollHeight)}}})},buildCongressman:function(b){var c=require("request"),d=require("vue");new d({el:"#page-congressman",data:{loading:!1,total:0,yearOutgoing:2017,monthOutgoing:9,congressman:{id:b,nomeCivil:"",nomeEleitoral:"",siglaPartido:"",siglaUf:"",idLegislatura:"",urlFoto:"",telefone:"",email:"",dataNascimento:"",idade:"",condicaoEleitoral:"",escolaridade:"",municipioNascimento:"",ufNascimento:""},outgoing:[]},beforeCreate:function(){var a=this;c.loadCongressmanDetails(b,function(b){var c=new Date(b.dataNascimento),d=new Date,e=Math.floor((d.getTime()-c.getTime())/1e3/60/60/24/365);a.congressman.id=b.id,a.congressman.nomeCivil=b.nomeCivil,a.congressman.nomeEleitoral=b.ultimoStatus.nomeEleitoral,a.congressman.siglaPartido=b.ultimoStatus.siglaPartido,a.congressman.siglaUf=b.ultimoStatus.siglaUf,a.congressman.idLegislatura=b.ultimoStatus.idLegislatura,a.congressman.urlFoto=b.ultimoStatus.urlFoto,a.congressman.telefone=b.ultimoStatus.gabinete.telefone,a.congressman.email=b.ultimoStatus.gabinete.email,a.congressman.condicaoEleitoral=b.ultimoStatus.condicaoEleitoral,a.congressman.dataNascimento=b.dataNascimento.split("-").reverse().join("/"),a.congressman.idade=e,a.congressman.escolaridade=b.escolaridade,a.congressman.municipioNascimento=b.municipioNascimento,a.congressman.ufNascimento=b.ufNascimento,document.title=b.ultimoStatus.nomeEleitoral+" | Vigie Seu Deputado",a.buildSelectDate();var f=new Date;a.yearOutgoing=f.getFullYear(),a.monthOutgoing=f.getMonth()+1,a.loadOutgoing()},function(){a.loading=!0},function(a){console.log(a)})},methods:{loadOutgoing:function(){var a=this;c.loadCongressmanOutgoing(b,{mes:a.monthOutgoing,ano:a.yearOutgoing,itens:100},function(b){if(a.outgoing=[],a.total=0,0==b.length)return void(a.loading=!1);for(var c={tipoDespesa:b[0].tipoDespesa,expenses:[]},d=0,e=b.length;d<e;d++)a.total+=parseFloat(b[d].valorDocumento),b[d].tipoDespesa==c.tipoDespesa?c.expenses.push(b[d]):(a.outgoing.push(c),c={tipoDespesa:b[d].tipoDespesa,expenses:[b[d]]});a.loading=!1},function(){a.loading=!0},function(a){console.log(a)})},selectMonth:function(){var b=a("#select-month option:selected").val().split("/");this.monthOutgoing=b[0],this.yearOutgoing=b[1],this.loadOutgoing()},buildSelectDate:function(){for(var b=new Date,c=1,d=[],e=2015,f="";c<=12;){switch(d.push(c+"/"+e),c-1){case 0:v="Janeiro/"+e;break;case 1:v="Fevereiro/"+e;break;case 2:v="Março/"+e;break;case 3:v="Abril/"+e;break;case 4:v="Maio/"+e;break;case 5:v="Junho/"+e;break;case 6:v="Julho/"+e;break;case 7:v="Agosto/"+e;break;case 8:v="Setembro/"+e;break;case 9:v="Outubro/"+e;break;case 10:v="Novembro/"+e;break;default:v="Dezembro/"+e}if(b.getMonth()==c-1&&b.getFullYear()==e){f+='<option selected value="'+c+"/"+e+'">'+v+"</option>";break}f+='<option value="'+c+"/"+e+'">'+v+"</option>",12==c&&(e++,c=0),c++}a("#select-month").html(f)},formatMoney:function(a){return a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}})}};return b});